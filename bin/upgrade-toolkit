#!/usr/bin/env php
<?php

@ini_set('memory_limit', '-1');

if ($GLOBALS['_composer_autoload_path']) {
    require $GLOBALS['_composer_autoload_path'];
}

use Oro\UpgradeToolkit\Rector\Console\Command\FileOperationsCommand;
use Oro\UpgradeToolkit\Rector\Console\Command\RectorCommandWrapper;
use Oro\UpgradeToolkit\Rector\Console\Command\UpgradeCommand;
use Oro\UpgradeToolkit\YmlFixer\Command\YmlFixCommand;
use Symfony\Component\Console\Application;

$application = new Application('Upgrade Toolkit');

$upgradeCommand = new UpgradeCommand();
$application->addCommand($upgradeCommand);

$ymlFixCommand = new YmlFixCommand();
$application->addCommand($ymlFixCommand);

$fileOpsCommand = new FileOperationsCommand();
$application->addCommand($fileOpsCommand);

$rectorWrapper = new RectorCommandWrapper();
$application->addCommand($rectorWrapper);

$application->setDefaultCommand($upgradeCommand->getName());

$application->run();
